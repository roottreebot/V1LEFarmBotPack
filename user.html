<!DOCTYPE html>
<html>
<head>
  <title>Users</title>
  <style>
    body { background:#0e0e0e; color:#eee; font-family: monospace; }
    table { border-collapse: collapse; width:100%; }
    th, td { border:1px solid #333; padding:6px; }
    th { background:#222; }
    button {
      padding:4px 8px;
      margin:2px;
      cursor:pointer;
    }
  </style>
</head>
<body>

<h2>ðŸ‘¥ Users</h2>

<table id="table">
  <tr>
    <th>ID</th>
    <th>User</th>
    <th>Level</th>
    <th>XP</th>
    <th>VIP</th>
    <th>Banned</th>
    <th>Actions</th>
  </tr>
</table>

<script>
async function load() {
  const res = await fetch('/api/users');
  const users = await res.json();
  const table = document.getElementById('table');

  table.innerHTML = `
    <tr>
      <th>ID</th>
      <th>User</th>
      <th>Level</th>
      <th>XP</th>
      <th>VIP</th>
      <th>Banned</th>
      <th>Actions</th>
    </tr>
  `;

  Object.entries(users).forEach(([id, u]) => {
    const row = document.createElement('tr');

    row.innerHTML = `
      <td>${id}</td>
      <td>${u.username || '-'}</td>
      <td>${u.level || 0}</td>
      <td>${u.xp || 0}</td>
      <td>${u.vip ? 'âœ…' : ''}</td>
      <td>${u.banned ? 'ðŸš«' : ''}</td>
      <td>
        <button onclick="vip('${id}', ${!u.vip})">
          ${u.vip ? 'Remove VIP' : 'Give VIP'}
        </button>
        <button onclick="ban('${id}', ${!u.banned})">
          ${u.banned ? 'Unban' : 'Ban'}
        </button>
      </td>
    `;
    table.appendChild(row);
  });
}

async function vip(id, state) {
  await fetch('/api/user/vip', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id, vip: state })
  });
  load();
}

async function ban(id, state) {
  await fetch('/api/user/' + (state ? 'ban' : 'unban'), {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({ id })
  });
  load();
}

load();
</script>

</body>
</html>
